<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="author" content="Amateurgolf.com">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>Amateurgolf.com Web App Demo</title>
    <link rel="canonical" href="./index.html">


    <link rel="manifest" href="manifest.json">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Amateurgolf.com">
    <meta name="apple-mobile-web-app-title" content="Amateurgolf.com">
    <meta name="theme-color" content="#800">
    <meta name="msapplication-navbutton-color" content="#666">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="msapplication-starturl" content="/index.html">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" type="image/png" href="./icons/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="./icons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="./icons/android-192x192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="./icons/apple-touch-icon-180x180.png" sizes="180x180">
    <meta name="msapplication-config" content="./icons/browserconfig.xml">

<!-- Bootstrap core CSS -->
<link href="./css/bootstrap.min.css" rel="stylesheet">

<script src="./js/alpine.js"></script>

<style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      .cardlink a {
          text-decoration: none;
          color: #333;
      }
      .cardlink a:hover {
          color: #009;
      }
      .agclogo {
        height: 35px;
      }
      .card-img-top {
        height:170px; 
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
        .agclogo { 
          height: 45px;
        }
        .card-img-top {
          height:140px; 
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="./css/starter-template.css" rel="stylesheet">
  </head>
  <body>
  <div class="wholeinterface"  x-data="dataloader()" x-init="() => {init()}">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="#" @click="switchArticlesPage()"><img src="./images/agclogo.png" class="agclogo" alt="" loading="lazy"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle form-control-lg" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">CONTENT</a>
        <div x-model="currContentSelected" class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item" href="#" data-value="News" @click="doShowArticles()">News</a>
          <a class="dropdown-item" href="#" data-value="Tournaments" @click="doShowTournaments()">Tournaments</a>
          <a class="dropdown-item" href="#" data-value="Courses" @click="doShowCourses()">Courses</a>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">
          <svg class="bi" width="32" height="32" fill="currentColor" aria-labelledby="title">
            <title id="title" lang="en">Shopping Cart</title>
            <use xlink:href="bootstrap-icons.svg#cart2"/>
          </svg>
        </span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">
          <svg class="bi" width="32" height="32" fill="currentColor" aria-labelledby="title">
            <title id="title" lang="en">Profile</title>
            <use xlink:href="bootstrap-icons.svg#person"/>
          </svg>
        </span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" @click="doShowSettings()">
          <svg class="bi" width="32" height="32" fill="currentColor" aria-labelledby="title">
            <title id="title" lang="en">Settings</title>
            <use xlink:href="bootstrap-icons.svg#gear"/>
          </svg>
        </span></a>
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control form-control-sm mr-sm-2" type="text" placeholder="Search" aria-label="Search">
      <button class="btn btn-secondary form-control-sm my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>

<main role="main" class="container">


<div class="coursesWindow" x-show="showCourses">
  <div class="card" style="width: 100%;">
    <div class="card-body" id="coursesIntro">
      <h5 class="card-title">Welcome to Amateurgolf.com</h5>
      <p class="card-text">Welcome.  You are running a demo of the Amateurgolf.com Web App.</p>
    </div>
  </div>
  <div class="container cardlink"><div class="row row-cols-lg-3 row-cols-md-2">
    <template x-for="item in activeCourseList">
      <a href="#" @click="doShowCourse(item.id)">
      <div class="col card" style="padding:0; width:100%;height:100%;border-radius:12px;margin-bottom:10px;">
        <img x-bind:src="getImageURL(item.imageURL)" class="card-img-top" style="width:100%; object-fit: cover;" alt="">
        <div class="card-body" id="homeIntro">
          <h6 class="card-title" x-text="item.courseName" style="font-weight:600;"></h5>
          <p class="card-text" x-text="getHTMLStrippedText(item.featuredTeaser)"></p>
        </div>
      </div>
    </a>
    </template>  
  </div></div>
</div>
<div class="articlesWindow" x-show="showArticles">
  <div class="card" style="width: 100%;">
    <div class="card-body" id="coursesIntro">
      <h5 class="card-title">Amateurgolf.com News</h5>
      <p class="card-text">Filter: 
        <select x-model="currArticleType" x-on:change="switchArticlesPage()">
          <template x-for="typeName in articleTypes">
            <option x-text="typeName"></option>
          </template>
        </select>
    </div>
  </div>
  <div class="container cardlink"><div class="row row-cols-lg-3 row-cols-md-2">
    <template x-for="item in activeArticleList">
      <a href="#" @click="doShowArticle(item.id)">
      <div class="col card" style="padding:0; width:100%;height:100%;border-radius:12px;margin-bottom:10px;">
        <img x-bind:src="getImageURL(item.imageURL)" class="card-img-top" style="width:100%; object-fit: cover;" alt="">
        <div class="card-body" id="homeIntro">
          <h6 class="card-title" x-text="item.title" style="font-weight:600;"></h5>
          <p class="card-text" x-text="getHTMLText(item.teaser)"></p>
        </div>
      </div>
      </a>
    </template>  
  </div></div>
</div>
<div class="tournamentWindow" x-show="showTournaments">
  <div class="card" style="width:100%;">
    <div class="card-body" id="coursesIntro">
      <h5 class="card-title">Tournaments</h5>
      <p class="card-text">Filter: 
        <select x-model="currTournamentType" x-on:change="switchTournamentsPage()">
          <template x-for="typeName in tournamentTypes">
            <option x-text="typeName"></option>
          </template>
        </select>
    </div>
  </div>
  <div class="container cardlink"><div class="row row-cols-lg-3 row-cols-md-2">
    <template x-for="item in activeTournamentList">
      <a href="#" @click="doShowTournament(item.id)">
      <div class="col card" style="padding:0;width:100%;height:100%;border-radius:12px;margin-bottom:10px;">
        <img x-bind:src="getImageURL(item.imageURL)" class="card-img-top" style="width:100%; object-fit: cover;" alt="">
        <div class="card-body" id="homeIntro">
          <h6 class="card-title" x-text="item.title" style="font-weight:600;"></h6>
          <p><span x-text="getDateFromSQLDate(item.tourDateBegin)"></span> - <span x-text="getDateFromSQLDate(item.tourDateEnd)"></span></p>
          <p class="card-text"><span x-text="item.courseName"></span>, <span x-text="item.courseState"></span></p>
        </div>
      </div>
      </a>
    </template>  
  </div></div>
</div>

<div class="courseDisplay" x-show="showCoursePage">
  <a class="nav-link" href="#" @click="doShowCourses()">
    <svg class="bi" width="32" height="32" fill="#333" aria-labelledby="title">
      <title id="title" lang="en">Return to Courses</title>
      <use xlink:href="bootstrap-icons.svg#arrow-left"/>
    </svg>
  </a>
  <div class="card" style="width: 100%;">

      <div class="card-body" id="coursesIntro">
        <img x-bind:src="getImageURL(currCourse.imageURL)" class="img-fluid" style="max-width: 100%; height: auto" alt="">
        <h5 class="card-title" x-text="currCourse.courseName"></h5>
        <p>
          <span x-text="currCourse.courseAddress"></span><br/>
          <span x-text="currCourse.courseCity"></span>, <span x-text="currCourse.courseState"></span>  <span x-text="currCourse.courseZipcode"></span>
        </p>

        <h5>Tournaments:</h5>
        <template x-for="item in currCourseTournaments">
          <a href="#" @click="doShowTournament(item.id)">
            <h6 class="card-title" x-text="item.title" style="font-weight:600;"></h5>
            </a>
          </template>  
      </div>
  </div>
  <a class="nav-link" href="#" @click="doShowCourses()">
    <svg class="bi" width="32" height="32" fill="#333" aria-labelledby="title">
      <title id="title" lang="en">Return to Courses</title>
      <use xlink:href="bootstrap-icons.svg#arrow-left"/>
    </svg>
  </a>
</div>
<div class="articleDisplay" x-show="showArticlePage">
  <a class="nav-link" href="#" @click="doShowArticles()">
    <svg class="bi" width="32" height="32" fill="#333" aria-labelledby="title">
      <title id="title" lang="en">Return to News</title>
      <use xlink:href="bootstrap-icons.svg#arrow-left"/>
    </svg>
  </a>
  <div class="card" style="width: 100%;">

      <div class="card-body" id="coursesIntro">
        <img x-bind:src="getImageURL(currArticle.imageURL)" class="img-fluid" style="max-width: 100%; height: auto" alt="">
        <h5 class="card-title" x-text="currArticle.title"></h5>
        <p class="card-text" x-html="getHTMLText(currArticle.articleText)"></p>
      </div>
  </div>
  <a class="nav-link" href="#" @click="doShowArticles()">
    <svg class="bi" width="32" height="32" fill="#333" aria-labelledby="title">
      <title id="title" lang="en">Return to News</title>
      <use xlink:href="bootstrap-icons.svg#arrow-left"/>
    </svg>
  </a>
</div>
<div class="tournamentDisplay" x-show="showTournamentPage">
  <a class="nav-link" href="#" @click="doShowTournaments()">
    <svg class="bi" width="32" height="32" fill="#333" aria-labelledby="title">
      <title id="title" lang="en">Return to News</title>
      <use xlink:href="bootstrap-icons.svg#arrow-left"/>
    </svg>
  </a>
  <div class="card" style="width: 100%;">
      <div class="card-body" id="coursesIntro">
        <img x-bind:src="getImageURL(currTournament.imageURL)" class="img-fluid" style="max-width: 100%; height: auto" alt="">
        <h5 class="card-title" x-text="currTournament.title"></h5>
        <a href="#" @click="doShowCourse(currTournament.courseID)"><h5 class="card-title" x-text="currTournament.courseName"></h5></a>
        <p>
          <span x-text="currTournament.courseCity"></span>, <span x-text="currTournament.courseState"></span>
        </p>
        <p><span x-text="getDateFromSQLDate(currTournament.tourDateBegin)"></span> - <span x-text="getDateFromSQLDate(currTournament.tourDateEnd)"></span></p>
        <p class="card-text" x-html="getHTMLStrippedText(currTournament.notes)"></p>
      </div>
  </div>
  <a class="nav-link" href="#" @click="doShowTournaments()">
    <svg class="bi" width="32" height="32" fill="#333" aria-labelledby="title">
      <title id="title" lang="en">Return to News</title>
      <use xlink:href="bootstrap-icons.svg#arrow-left"/>
    </svg>
  </a>
</div>

      <div class="card-body" id="settingsWindow" x-show="showSettings">
        <h5 class="card-title">Settings</h5>
        <p class="card-text">Use the button below to re-import the database.  Normally this will happen in the background, but hey this is a work in progress!</p>
        <p class="card-text"><button type="button" class="btn btn-primary" @click="doImport(); return false;">Re-Import Data</button></p>
      </div>
      <div class="card-body" id="introWindow" x-show="showIntro">
      <h5 class="card-title">Welcome to Amateurgolf.com</h5>
      <p class="card-text">This is a demo site to test Amateurgolf.com content in a Progressive Web Application.</p>
      <p class="card-text">It looks like you don't have any content imported yet.  Click the Import button below to begin.</p>
      <p class="card-text">This will import all the latest News, Tournaments, and Courses to your device.  Once loaded the site won't have to make calls to the Amateurgolf.com website for data and will work really fast.  It will also work when you are offline or have a bad connection!</p>
      <p class="card-text">On a production site you wouldn't see this message, it would just start loading data in for the user.  But hey, we're testing some stuff here!</p>
      <p class="card-text"><button type="button" class="btn btn-primary" @click="doImport(); return false;">Import Data</button></p>
    </div>
    <div class="card-body" id="loadWindow" x-show="showLoading">
      <h5 class="card-title">Loading data</h5>
      <p class="card-text">Ok, here we go.  There are three files to load.</p>
      <p class="card-text" id="newsLoading">Loading the latest news...</p>
      <p class="card-text" id="tourLoading" x-show="showTourLoading">Loading the latest tournament database...</p>
      <p class="card-text" id="courLoading" x-show="showCourLoading">Loading the latest course database...</p>
      <p class="card-text" id="doneLoading" x-show="showDoneLoading">OK, that's it.  Content is loaded into your system and you are ready to go.  Click the Amateurgolf.com logo in the upper left corner and the homepage should load.</p>
    </div>
  </div>

</main><!-- /.container https://code.jquery.com/jquery-3.5.1.slim.min.js -->
<script src="./js/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script>window.jQuery || document.write('<script src="./js/jquery.slim.min.js"><\/script>')</script><script src="./js/bootstrap.bundle.min.js"></script>

      <script type="text/javascript">
        function dataloader() {
          return {
                db: null,
                isLoading: false,
                showHome: false,
                showIntro: false,
                showLoading: false,
                showTourLoading: false,
                showCourLoading: false,
                showDoneLoading: false,
                showCourses: false,
                showArticles: false,
                showTournaments: false,
                showSettings: false,
                showNews: false,
                articles: [],
                courses: [],
                tournaments: [],
                activeCourseList: [],
                activeArticleList: [],
                activeTournamentList: [],
                currArticle: {"id": 0,"title": "Placement data.","teaser": "","articleText": "","articleBeginDate":"2020-08-10T00:00:00","articleEndDate":"2020-08-10T00:00:00","active":"0","featured": 0,"priority": 0,"archived": 0,"timesviewed": 0,"typeName": "","imageURL": "/images/agclogo-new.png","imageCaption": "","tournamentID": 0,"tourName": "","tourDateBegin": "2020-08-10T00:00:00","tourDateEnd": "2020-08-10T00:00:00"},
                currCourse: {"id":0,"courseName": "","courseAddress": "","courseCity": "","courseState": "","courseZipcode": "","courseURL": "www.amateurgolf.com","coursePhone": "","featured": 1,"featuredTeaser": "","imageURL": "/images/agclogo-new.png","imageCaption": ""},
                currTournament: {"id": 0,"title": "","tourDateBegin": "2020-09-11T00:00:00","tourDateEnd": "2020-09-13T00:00:00","notes": "","active": 1,"isMajor": "0","usgaEvent": "0","poweredByAGC": "No","latestResultsURL": "","entryFormURL": "","tournamentFormat": "","featured": 0,"nowPlaying": 0,"courseID": 0,"courseName": "","courseCity": "","courseState": "","imageURL": "/images/agclogo-new.png","imageCaption": ""},
                currCourseTournaments: [],
                dbArticleCount: 0,
                dbCoursesCount: 0,
                dbTournamentsCount: 0,
                currContentSelected: "",
                showCoursePage: false,
                showTournamentPage: false,
                showArticlePage: false,
                currTournamentType: "Now Playing",
                tournamentTypes: ["Now Playing", "Just Finished", "Playing Soon"],
                currArticleType: "Featured News",
                articleTypes: ["Featured News", "Latest News", "Equipment Reviews"],
                doHideAllWindows() {
                  this.showHome = false;
                  this.showIntro = false;
                  this.showLoading = false;
                  this.showCourses = false;
                  this.showTournaments = false;  
                  this.showArticles = false;
                  this.showSettings = false;
                  this.showCoursePage = false;
                  this.showTournamentPage = false;
                  this.showArticlePage = false;
                },
          doShowCourses() {
            this.doHideAllWindows();
            this.currContentSelected = "Courses";
            this.showCourses = true;
          },
          doShowCourse(courseID) {
            this.doHideAllWindows();
            this.showCourse(courseID, 'currCourse');
            this.showCoursePage = true;
          },
          doShowArticles() {
            this.doHideAllWindows();
            this.currContentSelected = "News";
            this.showArticles = true;
          },
          doShowTournaments() {
            this.doHideAllWindows();
            this.currContentSelected = "Tournaments";
            this.showTournaments = true;  
          },
          doShowSettings() {
            this.doHideAllWindows();
            this.showSettings = true;
          },
          switchArticlesPage() {
            this.activeArticleList = [];
            this.doHideAllWindows();
            this.showArticlesPage(this.activeArticleList);
            this.showArticles = true;
          },
          switchTournamentsPage() {
            this.activeTournamentList = [];
            this.doHideAllWindows();
            this.showTournamentsPage(this.activeTournamentList);
            this.showTournaments = true;
          },
          getImageURL(inURL) {
            return "https://www.amateurgolf.com" + inURL;
          },
          getHTMLText(inText) {
            return inText.replaceAll("\r\n","<p>");
          },
          getHTMLStrippedText(inText) {
            return inText.replaceAll("\r\n","");
          },
          getToday() {
            var d = new Date();
            var dyear = d.getFullYear();
            var dmon = "0" + (d.getMonth()+1);
            dmon = dmon.substring(dmon.length - 2, dmon.length);
            var dday = "0" + d.getDate();
            dday = dday.substring(dday.length - 2, dday.length);
            var today = dyear + "-" + dmon + "-" + dday + "T00:00:00";
            return today;
          },
          getDateFromToday(numdays) {
            var d = new Date();
            d.setDate(d.getDate()+numdays);
            var dyear = d.getFullYear();
            var dmon = "0" + (d.getMonth()+1);
            dmon = dmon.substring(dmon.length - 2, dmon.length);
            var dday = "0" + d.getDate();
            dday = dday.substring(dday.length - 2, dday.length);
            var today = dyear + "-" + dmon + "-" + dday + "T00:00:00";
            return today;
          },
          getDateFromSQLDate(inSQLDate) {
            // "2020-09-11T00:00:00"
            var newDate = inSQLDate.substring(5,7) + "/" + inSQLDate.substring(8,10) + "/" + inSQLDate.substring(0,4);
            // console.log (new Date(newDate));
            return newDate;
          },
          getSQLDate(inDiff) {
            var d = new Date();
            d.setDate(d.getDate() + inDiff);
            var dyear = d.getFullYear();
            var dmon = "0" + d.getMonth();
            dmon = dmon.slice(dmon.length-2,2);
            var dday = d.getDate();
            if (dday.length == 1)  dday = "0" + dday;
            var today = dyear + "-" + dmon + "-" + dday + "T00:00:00";
            return today;
          },
          sqlToJsDate(sqlDate) {
            //alert(sqlDate);
            //sqlDate in SQL DATETIME format ("yyyy-mm-dd hh:mm:ss.ms")
            var sqlDateArr1 = sqlDate.split("-");
            //format of sqlDateArr1[] = ['yyyy','mm','dd hh:mm:ms']
            var sYear = sqlDateArr1[0];
            var sMonth = (Number(sqlDateArr1[1]) - 1).toString();
            var sqlDateArr2 = sqlDateArr1[2].split(" ");
            //format of sqlDateArr2[] = ['dd', 'hh:mm:ss.ms']
            var sDay = sqlDateArr2[0];
            var sqlDateArr3 = sqlDateArr2[1].split(":");
            //format of sqlDateArr3[] = ['hh','mm','ss.ms']
            var sHour = sqlDateArr3[0];
            var sMinute = sqlDateArr3[1];
            var sqlDateArr4 = sqlDateArr3[2].split(".");
            //format of sqlDateArr4[] = ['ss','ms']
            var sSecond = sqlDateArr4[0];
            var sMillisecond = sqlDateArr4[1];
            return new Date(sYear,sMonth,sDay,sHour,sMinute,sSecond,sMillisecond);
          },
          async doImport() {
            this.showLoading = true;
            this.showIntro = false;

            await this.loadNews();
            await this.loadTours();
            await this.loadCourses();

            this.showDoneLoading = true;
            window.localStorage.setItem('dbCreated', 'true');
            window.localStorage.setItem('dbCreatedDate', Date.Now);
          },
            async loadNews() {
              fetch('./json/articles3.json')
              .then(res => res.json())
              .then(data => {
                window.localStorage.setItem('articlesAll', JSON.stringify(data));
                $("#newsLoading").html("Finished loading " + data.length + " articles.");
              })
            },
            async loadTours() {
              this.showTourLoading = true;
              fetch('./json/tournaments3.json')
              .then(res => res.json())
              .then(data => {
                window.localStorage.setItem('tournamentsAll', JSON.stringify(data));
                $("#tourLoading").html("Finished loading " + data.length + " tournaments.");
              })
            },
            async loadCourses() {
              this.showCourLoading = true;
              fetch('./json/courses3.json')
              .then(res => res.json())
              .then(data => {
                window.localStorage.setItem('coursesAll', JSON.stringify(data));
                $("#courLoading").html("Finished loading " + data.length + " courses.");
              })
            },
          showCoursesPage(inList) {
            this.courses = JSON.parse(window.localStorage.getItem('coursesAll'));
            var tempList = [];

            tempList = this.courses.filter(function(item){
              return item.featured <= 1;         
            });
            
            for(var i = 0; i < tempList.length; i++) {
              if (i < 6) inList.push(tempList[i]);
            }
          },
          doShowCourse(courseID) {
            this.doHideAllWindows();
            this.currCourse = this.courses.find(item => item.id == courseID);
            this.showCoursePage = true;
          },
          doShowArticle(articleID) {
            this.doHideAllWindows();
            this.currArticle = this.articles.find(item => item.id == articleID);
            this.showArticlePage = true;
          },
          showArticlesPage(inList) {
            this.articles = JSON.parse(window.localStorage.getItem('articlesAll'));
            var tempList = [];

            if (this.currArticleType === "Featured News") {
                tempList = this.articles.filter(function(item){
                    return item.priority <= 2;         
                });
                for(var i = 0; i < tempList.length; i++) {
                   if (i < 6) inList.push(tempList[i]);
                }
            }
            if (this.currArticleType === "Latest News") {
                tempList = this.articles.filter(function(item){
                    return item.priority > 2;         
                });
                for(var i = 0; i < tempList.length; i++) {
                    if (i < 12) inList.push(tempList[i]);
                }
            }
            if (this.currArticleType === "Equipment Reviews") {
                tempList = this.articles.filter(function(item){
                    return item.typeName == "Equipment Review";         
                });
                for(var i = 0; i < tempList.length; i++) {
                    if (i < 12) inList.push(tempList[i]);
                }
            }
          },
          doShowTournament(tournamentID) {
            this.doHideAllWindows();
            this.currTournament = this.tournaments.find(item => item.id == tournamentID);
            this.showTournamentPage = true;
          },
          showTournamentsPage(inList) {
            this.tournaments = JSON.parse(window.localStorage.getItem('tournamentsAll'));
            var tempList = [];
            
            if (this.currTournamentType == "Now Playing") {
              var compareDate = this.getDateFromToday(0);

              tempList = this.tournaments.filter(function(item){
                return (item.tourDateBegin <= compareDate && item.tourDateEnd >= compareDate) ;
              });
              tempList.sort(function(a,b) {
                return new Date(a.tourDateBegin) - new Date(b.tourDateBegin);
              });
            
              for(var i = 0; i < tempList.length; i++) {
                inList.push(tempList[i]);
              }
            }
            if (this.currTournamentType == "Just Finished") {
              var startDate = this.getDateFromToday(-7);
              var endDate = this.getDateFromToday(0);

              tempList = this.tournaments.filter(function(item){
                return (item.tourDateEnd >= startDate && item.tourDateEnd < endDate) ;
              });
              tempList.sort(function(a,b) {
                return new Date(a.tourDateBegin) - new Date(b.tourDateBegin);
              });
            
              for(var i = 0; i < tempList.length; i++) {
                inList.push(tempList[i]);
              }
            }
            if (this.currTournamentType == "Playing Soon") {
              var startDate = this.getDateFromToday(1);
              var endDate = this.getDateFromToday(7);

              tempList = this.tournaments.filter(function(item){
                return (item.tourDateBegin >= startDate && item.tourDateBegin <= endDate) ;
              });
              tempList.sort(function(a,b) {
                return new Date(a.tourDateBegin) - new Date(b.tourDateBegin);
              });
            
              for(var i = 0; i < tempList.length; i++) {
                inList.push(tempList[i]);
              }
            }
          },
        init() {
          if (window.localStorage.getItem('dbCreated') === 'true') {
              this.doHideAllWindows();
              this.showCoursesPage(this.activeCourseList);
              this.showArticlesPage(this.activeArticleList);
              this.showTournamentsPage(this.activeTournamentList);
              this.showArticles = true;
          }
          else 
            this.showIntro = true;
        }
      }}
  </script>
  
<script>
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js')
            .then(registration => {
              console.log('Service Worker is registered', registration);
            })
            .catch(err => {
              console.error('Registration failed:', err);
            });
          });
        }    
</script>    
</div>        
</body>
</html>
